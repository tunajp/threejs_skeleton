$traceurRuntime.options.symbols=!0,System.registerModule("config.js",[],function(e){"use strict";var t,r=!0,n=60,i="js/app/assets/";return t={},Object.defineProperty(t,"_DEBUG_MODE_",{get:function(){return r},configurable:!0,enumerable:!0}),Object.defineProperty(t,"_FPS_",{get:function(){return n},configurable:!0,enumerable:!0}),Object.defineProperty(t,"_ASSETS_PATH_",{get:function(){return i},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("util.js",[],function(e){"use strict";var t,r=System.get("config.js"),n=$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(){}var t,n,i;return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{},{trace_func:function(e){if(r._DEBUG_MODE_){var t=this.getCurrentTimeString();console.log(t+" "+e)}},createDebugBoard:function(){r._DEBUG_MODE_&&(this.domElement=document.createElement("div"),this.domElement.id="debug_board",document.body.appendChild(this.domElement))},debug:function(e){if(r._DEBUG_MODE_){var t=this.getCurrentTimeString();document.querySelector("#debug_board").innerHTML=t+" "+e}},getCurrentTimeString:function(){var e=new Date,t=this.pad(e.getHours()),r=this.pad(e.getMinutes()),n=this.pad(e.getSeconds()),i=this.pad(e.getMilliseconds(),3),s=t+":"+r+":"+n+":"+i;return s},pad:$traceurRuntime.initTailRecursiveFunction(function(e){return $traceurRuntime.call(function(e){var r=void 0!==arguments[1]?arguments[1]:2;return(null==e||0==e.length)&&(e="0"),3==r?(t="00"+e,$traceurRuntime.continuation(t.slice,t,[-3])):(n="0"+e,$traceurRuntime.continuation(n.slice,n,[-2]))},this,arguments)}),webglInfo:function(e){if(null==e)throw"THREE.WebGLRenderer is null object";var t=e.context,r={Version:t.getParameter(t.VERSION),"Shading language":t.getParameter(t.SHADING_LANGUAGE_VERSION),Vendor:t.getParameter(t.VENDOR),Renderer:t.getParameter(t.RENDERER),"Max varying vectors":t.getParameter(t.MAX_VARYING_VECTORS),"Max vertex attribs":t.getParameter(t.MAX_VERTEX_ATTRIBS),"Max vertex uniform vectors":t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),"Max fragment uniform vectors":t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),"Max renderbuffer size":t.getParameter(t.MAX_RENDERBUFFER_SIZE),"Max texture size":t.getParameter(t.MAX_TEXTURE_SIZE),"Max cube map texture size":t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),"Max texture image units":t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),"Max vertex texture units":t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),"Max combined texture units":t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),"Max viewport dims":t.getParameter(t.MAX_VIEWPORT_DIMS)[0]+"x"+t.getParameter(t.MAX_VIEWPORT_DIMS)[1]};return console.log("WebGL info: ",r),r},getWH:function(){return{width:window.innerWidth,height:window.innerHeight}},i18nLoad:function(e){i18n.init({ns:{namespaces:["ns.special"],defaultNs:"ns.special"},useLocalStorage:!1,debug:!0},function(){e()})},screenshot:function(e,t){var r=t?"image/jpeg":"image/png",n=renderer.domElement.toDataURL(r);e||(n=n.replace(r,"image/octet-stream")),window.open(n,"_blank")},uuid:$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){var e;return i=[1e7]+-1e3+-4e3+-8e3+-1e11,$traceurRuntime.continuation(i.replace,i,[/[018]/g,$traceurRuntime.initTailRecursiveFunction(function(t){return $traceurRuntime.call(function(t){return e=t^16*Math.random()>>t/4,$traceurRuntime.continuation(e.toString,e,[16])},this,arguments)})])},this,arguments)})}])},this,arguments)})();return t={},Object.defineProperty(t,"Util",{get:function(){return n},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("logger.js",[],function(e){"use strict";var t,r=System.get("util.js"),n=$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(){}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{},{init:function(e){this.initialized=!0,this.len=e,this.domElement=document.createElement("div"),this.domElement.id="logger_board",document.body.appendChild(this.domElement)},clear:function(){if(null!=this.initialized)for(;this.domElement.childNodes.length>0;)this.domElement.removeChild(this.domElement.childNodes[0])},log:function(e){if(null!=this.initialized){var t=r.Util.getCurrentTimeString(),n=t+" "+e;for(this.domElement.appendChild(document.createTextNode(n)),this.domElement.appendChild(document.createElement("br"));this.domElement.childNodes.length>2*this.len;)this.domElement.removeChild(this.domElement.childNodes[0])}}}])},this,arguments)})();return t={},Object.defineProperty(t,"Logger",{get:function(){return n},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("iscene.js",[],function(e){"use strict";var t,r=(System.get("config.js"),System.get("util.js")),n=(System.get("logger.js"),$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(e){this.renderer,this._TEST_CONTROLLER_=!1,this.render_target_array=new Array,this.clock,this.loadingStatus={},this.loadingStatus.allItems=0,this.loadingStatus.loadedItems=0,this.loadingStatus.status="loading"}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{testController:function(){this._TEST_CONTROLLER_=!0,this.trackball=new THREE.TrackballControls(this.camera)},loadedIncrements:function(){r.Util.trace_func("IScene::loadedIncrements"),this.loadingStatus.loadedItems++,this.loadingStatus.loadedItems>=this.loadingStatus.allItems&&"loaded"!=this.loadingStatus.status&&(this.loadingStatus.status="loaded",this.clock=new THREE.Clock)},rendering:function(){this._TEST_CONTROLLER_&&this.trackball.update();for(var e=this.clock.getDelta(),t=0;t<this.render_target_array.length;t++)this.render_target_array[$traceurRuntime.toProperty(t)].rendering(e);this.rendererInfo(e),this.renderer.render(this.scene,this.camera)},rendererInfo:function(e){r.Util.debug("delta: "+Math.floor(1e5*e)/1e5+"<br>info.memory.programs:"+this.renderer.info.memory.programs+"<br>info.memory.geometries:"+this.renderer.info.memory.geometries+"<br>info.memory.textures:"+this.renderer.info.memory.textures+"<br>info.render.calls:"+this.renderer.info.render.calls+"<br>info.render.vertices:"+this.renderer.info.render.vertices+"<br>info.render.faces:"+this.renderer.info.render.faces+"<br>info.render.points:"+this.renderer.info.render.points)},resize:function(){r.Util.trace_func("IScene::resize");var e=r.Util.getWH();this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix()}},{}])},this,arguments)})());return t={},Object.defineProperty(t,"IScene",{get:function(){return n},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("objects/debugbox.js",[],function(e){"use strict";var t,r=(System.get("config.js"),System.get("util.js")),n=$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(e){r.Util.trace_func("Debugbox::constructor"),this.callback_function=e,this.mesh=new THREE.Mesh(new THREE.BoxGeometry(100,100,100),new THREE.MeshPhongMaterial({color:65280})),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.callback_function(this.mesh)}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{rendering:function(e){this.mesh.rotation.y+=e}},{}])},this,arguments)})();return t={},Object.defineProperty(t,"Debugbox",{get:function(){return n},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("objects/debugfloor.js",[],function(e){"use strict";var t,r=System.get("util.js"),n=(System.get("config.js"),$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(e){r.Util.trace_func("Debugfloor::constructor"),this.callback_function=e,this.mesh=new THREE.Mesh(new THREE.PlaneBufferGeometry(1e3,1e3),new THREE.MeshPhongMaterial({color:14737632})),this.mesh.rotation.x=Math.PI+Math.PI/2,this.mesh.receiveShadow=!0,this.callback_function(this.mesh)}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{rendering:function(e){}},{}])},this,arguments)})());return t={},Object.defineProperty(t,"Debugfloor",{get:function(){return n},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("objects/shaderbox.js",[],function(e){"use strict";var t,r=System.get("util.js"),n=System.get("config.js"),i=$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(e,t,i){r.Util.trace_func("Shaderbox::constructor"),this.callback_function=i;var s=new THREE.ImageUtils.loadTexture(n._ASSETS_PATH_+"Three.js-code-example.jpg"),o=!0,a=!1,u=!1;o===!0?a=!0:u=!0,this.customUniforms={baseTexture:{type:"t",value:s},time:{type:"f",value:1},grayscale:{type:"i",value:u},sepia:{type:"i",value:a}};var c=new THREE.ShaderMaterial({uniforms:this.customUniforms,vertexShader:e,fragmentShader:t});this.mesh=new THREE.Mesh(new THREE.BoxGeometry(100,100,100),c),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.callback_function(this.mesh)}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{rendering:function(e){this.mesh.rotation.y+=e,this.customUniforms.time.value+=e}},{}])},this,arguments)})();return t={},Object.defineProperty(t,"Shaderbox",{get:function(){return i},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("shaderloader.js",[],function(e){"use strict";var t,r=(System.get("util.js"),$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(){console.log("ShaderLoader::constructor")}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{getXHR2:function(e,t){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===this.status||console.log(404===this.status?"404 not found: "+e:"other xhr error: "+e),t(this.response)},r.timeout=1e4,r.ontimeout=function(){console.log("timeout: "+e),t(this.response)},r.send(null)}},{}])},this,arguments)})());return t={},Object.defineProperty(t,"ShaderLoader",{get:function(){return r},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("objects/videobox.js",[],function(e){"use strict";var t,r=System.get("config.js"),n=System.get("util.js"),i=System.get("shaderloader.js"),s=$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(e){var t=this;n.Util.trace_func("videobox::constructor"),this.video=document.createElement("video"),this.video.loop=!0,this.video.src=r._ASSETS_PATH_+"small.ogv",this.video.load(),this.video.play(),this.videoImage=document.createElement("canvas"),this.videoImage.width=480,this.videoImage.height=204,this.videoImageContext=this.videoImage.getContext("2d"),this.videoImageContext.fillStyle="#000000",this.videoImageContext.fillRect(0,0,this.videoImage.width,this.videoImage.height),this.videoTexture=new THREE.Texture(this.videoImage),this.videoTexture.minFilter=THREE.LinearFilter,this.videoTexture.magFilter=THREE.LinearFilter;var s=new i.ShaderLoader,o=new i.ShaderLoader;s.getXHR2("js/app/assets/shader/vertex.fx",function(r){console.log("vshader comp!"),o.getXHR2("js/app/assets/shader/mosaic_fragment.fx",function(n){console.log("fshader comp!"),t.customUniforms={baseTexture:{type:"t",value:t.videoTexture},time:{type:"f",value:1},vScreenSize:{type:"v2",value:new THREE.Vector2(480,320)},fMosaicScale:{type:"f",value:10}};var i=new THREE.ShaderMaterial({uniforms:t.customUniforms,vertexShader:r,fragmentShader:n});t.mesh=new THREE.Mesh(new THREE.BoxGeometry(100,100,100),i),e(t.mesh)})})}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{rendering:function(e){null!=this.mesh&&(this.mesh.rotation.y+=e,this.video.readyState===this.video.HAVE_ENOUGH_DATA&&(this.videoImageContext.drawImage(this.video,0,0),this.videoTexture&&(this.videoTexture.needsUpdate=!0)))}},{}])},this,arguments)})();return t={},Object.defineProperty(t,"Videobox",{get:function(){return s},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("scenes/testscene.js",[],function(e){"use strict";var t,r=(System.get("config.js"),System.get("util.js")),n=System.get("logger.js"),i=System.get("iscene.js"),s=System.get("objects/debugbox.js"),o=System.get("objects/videobox.js"),a=System.get("shaderloader.js"),u=System.get("objects/shaderbox.js"),c=System.get("objects/debugfloor.js"),l=$traceurRuntime.initTailRecursiveFunction(function(e){return $traceurRuntime.call(function(e){function t(e){$traceurRuntime.superConstructor(t).call(this,e),r.Util.trace_func("TestScene::constructor"),n.Logger.log("TestScene::constructor"),this.scene,this.camera,this.light,this.ambient,this.loadingStatus.allItems=0,this.renderer=e,this.scene=new THREE.Scene;var i=r.Util.getWH();this.camera=new THREE.PerspectiveCamera(45,1,.1,1e5),this.camera.position.set(0,150,500),this.camera.aspect=i.width/i.height,this.camera.updateProjectionMatrix(),this.light=new THREE.SpotLight(16777215),this.light.position.set(100,1e3,0),this.light.angle=Math.PI/4,this.scene.add(this.light),this.ambient=new THREE.AmbientLight(3355443),this.scene.add(this.ambient),this.loadObjects(),this.testController()}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[t,{loadObjects:function(){var e=this,t=new s.Debugbox(function(t){t.position.y+=70,e.scene.add(t),e.loadedIncrements()});this.render_target_array.push(t);var r=new o.Videobox(function(t){t.position.y+=70,t.position.x+=240,e.scene.add(t),e.loadedIncrements()});this.render_target_array.push(r);var n=new c.Debugfloor(function(t){e.scene.add(t),e.loadedIncrements()});this.render_target_array.push(n);var i=new a.ShaderLoader,l=new a.ShaderLoader;i.getXHR2("js/app/assets/shader/vertex.fx",function(t){console.log("vshader comp!"),l.getXHR2("js/app/assets/shader/fragment.fx",function(r){console.log("fshader comp!");var n=new u.Shaderbox(t,r,function(t){t.position.y+=70,t.position.x+=120,e.scene.add(t),e.loadedIncrements()});e.render_target_array.push(n)})})}},{},e])},this,arguments)})(i.IScene);return t={},Object.defineProperty(t,"TestScene",{get:function(){return l},configurable:!0,enumerable:!0}),t}),$traceurRuntime.options.symbols=!0,System.registerModule("app.js",[],function(e){"use strict";var t=System.get("config.js"),r=System.get("util.js"),n=System.get("logger.js"),i=System.get("scenes/testscene.js");return function(){var e=$traceurRuntime.initTailRecursiveFunction(function(){return $traceurRuntime.call(function(){function e(){if(t._DEBUG_MODE_&&n.Logger.init(5),r.Util.trace_func("Application::consturctor"),n.Logger.log("Application::consturctor"),this.renderer,this.stats,this.currentSceneObject,Detector.webgl){this.renderer=new THREE.WebGLRenderer({antialias:!0}),r.Util.trace_func("renderer->webgl"),n.Logger.log("renderer->webgl");{r.Util.webglInfo(this.renderer)}}else this.renderer=new THREE.CanvasRenderer,r.Util.trace_func("renderer->canvas"),n.Logger.log("renderer->canvas");var e=r.Util.getWH();this.renderer.setSize(e.width,e.height),this.renderer.setClearColor(0,1),document.getElementById("canvas").appendChild(this.renderer.domElement),t._DEBUG_MODE_&&(this.stats=new Stats,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",this.stats.domElement.style.zIndex=100,document.body.appendChild(this.stats.domElement)),this.currentSceneObject=new i.TestScene(this.renderer),this.resize()}return $traceurRuntime.continuation($traceurRuntime.createClass,$traceurRuntime,[e,{run:function(){r.Util.trace_func("Application::run"),n.Logger.log("Application::run"),n.Logger.log("HOGE!!!"),r.Util.createDebugBoard(),r.Util.debug("debug"),this.update()},update:function(){this.rendering(),t._DEBUG_MODE_&&this.stats.update()},rendering:function(){var e=this;60===t._FPS_?requestAnimationFrame(function(){e.update()}):setTimeout(function(){requestAnimationFrame(function(){e.update()})},1e3/t._FPS_),"loaded"===this.currentSceneObject.loadingStatus.status&&this.currentSceneObject.rendering()},resize:function(){var e=this;window.addEventListener("resize",function(t){var i=r.Util.getWH();n.Logger.log("Application::resize w:"+i.width+",h:"+i.height+",e:"+t),e.renderer.setSize(i.width,i.height),e.currentSceneObject.resize()},!1)}},{}])},this,arguments)})();document.addEventListener?document.addEventListener("DOMContentLoaded",function(){r.Util.i18nLoad(function(){r.Util.trace_func(i18n.t("app.i18nLoadComplete"));var t=new e;t.run()})},!1):alert("Sorry. Not supported browser...")}(),{}}),System.get("app.js");