System.register("config",[],function(){"use strict";var e=!0,t=60,n="js/app/assets/";return{get _DEBUG_MODE_(){return e},get _FPS_(){return t},get _ASSETS_PATH_(){return n}}}),System.register("util",[],function(){"use strict";function e(e){if(o._DEBUG_MODE_){var t=new Date,n=t.getHours(),i=t.getMinutes(),r=t.getSeconds(),s=t.getMilliseconds(),a=n+":"+i+":"+r+":"+s;console.log(a+" "+e)}}function t(e){if(o._DEBUG_MODE_){var t=new Date,n=t.getHours(),i=t.getMinutes(),r=t.getSeconds(),s=t.getMilliseconds(),a=n+":"+i+":"+r+":"+s;$("#debug_board").html(a+" "+e)}}function n(e){var t=e.context,n={Version:t.getParameter(t.VERSION),"Shading language":t.getParameter(t.SHADING_LANGUAGE_VERSION),Vendor:t.getParameter(t.VENDOR),Renderer:t.getParameter(t.RENDERER),"Max varying vectors":t.getParameter(t.MAX_VARYING_VECTORS),"Max vertex attribs":t.getParameter(t.MAX_VERTEX_ATTRIBS),"Max vertex uniform vectors":t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),"Max fragment uniform vectors":t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),"Max renderbuffer size":t.getParameter(t.MAX_RENDERBUFFER_SIZE),"Max texture size":t.getParameter(t.MAX_TEXTURE_SIZE),"Max cube map texture size":t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),"Max texture image units":t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),"Max vertex texture units":t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),"Max combined texture units":t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),"Max viewport dims":t.getParameter(t.MAX_VIEWPORT_DIMS)[0]+"x"+t.getParameter(t.MAX_VIEWPORT_DIMS)[1]};console.log("WebGL info: ",n)}function i(e,t,n,i,r){var s=$("<div>"+e+"</div>"),a={};a[n]=function(){$(this).dialog("close"),r(!1),$(this).dialog("destroy")},a[i]=function(){$(this).dialog("close"),r(!0),$(this).dialog("destroy")},s.dialog({modal:!0,draggable:!0,title:t,height:180,width:500,buttons:a,open:function(){var e=$(".ui-dialog-titlebar-close");e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')},overlay:{opacity:.3,background:"#225b7f"}})}function r(e,t,n,i,r){var s=$("<div>"+e+"</div>"),a={};a[n]=function(){$(this).dialog("close"),r(!1),$(this).dialog("destroy")},a[i]=function(){$(this).dialog("close"),r(!0),$(this).dialog("destroy")},s.dialog({modal:!0,draggable:!0,title:t,width:500,buttons:a,open:function(){var e=$(".ui-dialog-titlebar-close");e.append('<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>')},overlay:{opacity:.3,background:"#225b7f"}})}function s(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,s)}function a(e){$.i18n.init({ns:{namespaces:["ns.special"],defaultNs:"ns.special"},useLocalStorage:!1,debug:!0},function(){e()})}var o=System.get("config"),c=function(){};return $traceurRuntime.createClass(c,{hoge:function(){console.log("Hoge::hoge")}},{}),{get trace_func(){return e},get debug_board(){return t},get graphics_card_info(){return n},get Hoge(){return c},get confirmDialog(){return i},get myDialog(){return r},get uuid(){return s},get i18nLoad(){return a}}}),System.register("objects/debugbox",[],function(){"use strict";var e=System.get("util"),t=(System.get("config"),function(t){e.trace_func("Debugbox::constructor"),this.callback_function=t,this.mesh=new THREE.Mesh(new THREE.BoxGeometry(100,100,100),new THREE.MeshPhongMaterial({color:65280})),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.callback_function(this.mesh)});return $traceurRuntime.createClass(t,{rendering:function(e){this.mesh.rotation.y+=e}},{}),{get Debugbox(){return t}}}),System.register("objects/debugfloor",[],function(){"use strict";var e=System.get("util"),t=(System.get("config"),function(t){e.trace_func("Debugbox::constructor"),this.callback_function=t,this.mesh=new THREE.Mesh(new THREE.PlaneGeometry(1e3,1e3),new THREE.MeshPhongMaterial({color:14737632})),this.mesh.rotation.x=Math.PI+Math.PI/2,this.mesh.receiveShadow=!0,this.callback_function(this.mesh)});return $traceurRuntime.createClass(t,{rendering:function(){}},{}),{get Debugfloor(){return t}}}),System.register("objects/shaderbox",[],function(){"use strict";var e=System.get("util"),t=System.get("config"),n=function(n,i,r){e.trace_func("Shaderbox::constructor"),this.callback_function=r;var s=new THREE.ImageUtils.loadTexture(t._ASSETS_PATH_+"cover.png"),a=!0,o=!1,c=!1;a===!0?o=!0:c=!0,this.customUniforms={baseTexture:{type:"t",value:s},time:{type:"f",value:1},grayscale:{type:"i",value:c},sepia:{type:"i",value:o}};var u=new THREE.ShaderMaterial({uniforms:this.customUniforms,vertexShader:n,fragmentShader:i});this.mesh=new THREE.Mesh(new THREE.BoxGeometry(100,100,100),u),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.callback_function(this.mesh)};return $traceurRuntime.createClass(n,{rendering:function(e){this.mesh.rotation.y+=e,this.customUniforms.time.value+=e}},{}),{get Shaderbox(){return n}}}),System.register("testscene",[],function(){"use strict";var e=System.get("util"),t=(System.get("config"),System.get("objects/debugbox")),n=System.get("objects/shaderbox"),i=System.get("objects/debugfloor"),r=!0,s=function(t){e.trace_func("TestScene::constructor"),this.renderer,this.scene,this.camera,this.light,this.ambient,this.all_items=3,this.loaded_items=0,this.render_target_array=new Array,this.clock,this.renderer=t,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(45,1,.1,1e5),this.camera.position.set(0,150,500),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.light=new THREE.SpotLight(16777215),this.light.position.set(100,1e3,0),this.light.angle=Math.PI/4,this.scene.add(this.light),this.ambient=new THREE.AmbientLight(3355443),this.scene.add(this.ambient),this.light.castShadow=!0,this.light.shadowMapWidth=1024,this.light.shadowMapHeight=1024,this.light.shadowCameraNear=100,this.light.shadowCameraFar=1100,this.light.shadowCameraFov=30,this.light.shadowCameraVisible=!0,this.renderer.shadowMapEnabled=!0,this.loadObjects(),r&&(this.trackball=new THREE.TrackballControls(this.camera))};return $traceurRuntime.createClass(s,{getLoadingStatus:function(){return this.all_items===this.loaded_items||0==this.loading?!0:!1},loadedIncrements:function(){this.loaded_items++,this.loaded_items===this.all_items&&(this.loading=!1,this.clock=new THREE.Clock)},rendering:function(){r&&this.trackball.update();for(var e=this.clock.getDelta(),t=0;t<this.render_target_array.length;t++)this.render_target_array[t].rendering(e);this.renderer.render(this.scene,this.camera)},loadObjects:function(){var e=this,r=new t.Debugbox(function(t){t.position.y+=70,e.scene.add(t),e.loadedIncrements()});this.render_target_array.push(r),SHADER_LOADER.load(function(t){var i=t.vertexShader.vertex,r=t.fragmentShader.fragment,s=new n.Shaderbox(i,r,function(t){t.position.y+=70,t.position.x+=120,e.scene.add(t),e.loadedIncrements()});e.render_target_array.push(s)});var s=new i.Debugfloor(function(t){e.scene.add(t),e.loadedIncrements()});this.render_target_array.push(s)},resize:function(){e.trace_func("TestScene::resize"),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}},{}),{get TestScene(){return s}}}),System.register("app",[],function(){"use strict";var e=System.get("util"),t=System.get("config"),n=System.get("testscene"),i=function(){e.trace_func("App::constructor"),this.renderer,this.stats,this.currentSceneObject,this.renderer=Detector.webgl?new THREE.WebGLRenderer({antialias:!0}):new THREE.CanvasRenderer,Detector.webgl&&e.graphics_card_info(this.renderer);var i=window.innerWidth,r=window.innerHeight;this.renderer.setSize(i,r),this.renderer.setClearColor(0,1),document.getElementById("canvas").appendChild(this.renderer.domElement),this.stats=new Stats,this.stats.domElement.style.position="absolute",this.stats.domElement.style.top="0px",this.stats.domElement.style.zIndex=100,document.body.appendChild(this.stats.domElement),t._DEBUG_MODE_&&(document.body.appendChild(this.stats.domElement),$(document.body).append('<div id="debug_board" width="200" height="200">test<br>test2<br>test3<br></div')),this.currentSceneObject=new n.TestScene(this.renderer),this.resize()};return $traceurRuntime.createClass(i,{run:function(){e.trace_func("App::run"),this.update()},update:function(){this.rendering(),this.stats.update()},rendering:function(){var e=this;60===t._FPS_?requestAnimationFrame(function(){e.update()}):setTimeout(function(){requestAnimationFrame(function(){e.update()})},1e3/t._FPS_),this.currentSceneObject.getLoadingStatus()===!0&&this.currentSceneObject.rendering()},resize:function(){var t=this;e.trace_func("App::resize"),$(window).resize(function(){var n=window.innerWidth,i=window.innerHeight;e.trace_func("App::resize::resize w:"+n+",h:"+i),t.renderer.setSize(n,i),t.currentSceneObject.resize()})}},{}),$(function(){e.i18nLoad(function(){e.trace_func($.i18n.t("app.i18nLoadComplete"));var t=new i;t.run()})}),{}}),System.get("app");